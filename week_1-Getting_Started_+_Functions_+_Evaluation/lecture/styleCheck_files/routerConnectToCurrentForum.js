define("bundles/discussions/utils/routerConnectToCurrentForum",["require","exports","module","bundles/discussions/constants","js/lib/path"],function(require,exports,module){"use strict";var n=Object.assign||function(o){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n])}return o},o=require("bundles/discussions/constants"),r=o.naptimeForumTypes,e=require("js/lib/path");module.exports=function(i,o){if(!o.courseSlug)throw new Error("routerConnectToCurrentForum requires course slug as argument");var s=o.courseForums||[],c=o.mentorForums||[],p=o.weekNumber||i.params.week_number,a=o.forumId||i.params.forum_id,F=o.groupId||i.params.group_id,g=o.itemId||i.location.pathname.indexOf("/discussionPrompt/")<0&&i.params.item_id,u=void 0;if(p){var f=s.find(function(r){return"weekForumType"===r.forumType.typeName&&r.forumType.definition.weekNumber===parseInt(p,10)});u=f&&f.id}else if(F)u=void 0;else if(a){var T=s.concat(c),l=T.find(function(r){return r.forumId===a||r.legacyForumId===a});u=l&&l.id}else if(g){var y=s.find(function(r){return r.forumType.definition.itemId===g});u=y&&y.id}else{var v=s.find(function(e){return e.forumType.typeName===r.rootForumType});u=v&&v.id}var t=s.concat(c).find(function(r){return r.id===u}),m=void 0;if(t&&t.forumType.typeName===r.itemForumType){var d=i.location.pathname.split("discussions");d.pop(),m=e.join(d.join("discussions"),"discussions")}else t&&(m=e.join("/learn",o.courseSlug,t.link));return n({},o,{currentForumId:u,currentForum:t,currentForumUrl:m,rootPath:"/learn/"+o.courseSlug})}});